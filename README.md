>ä½œè€…ï¼šå¸…æ¬¡
>
>ä½œè€…ç®€ä»‹ï¼šCSDNåšå®¢ä¸“å®¶ã€åä¸ºäº‘äº«ä¸“å®¶è®¤è¯
>
>å…¬ä¼—å·ã€Œå¸…æ¬¡ã€ï¼šåˆ†äº« Android ç›¸å…³çŸ¥è¯†Â·é¢è¯•é¢˜åº“ã€‚
# ğŸ”¥ ä¸€ã€ç»„ä»¶åŒ–

ä½œä¸ºä¸€ä¸ªå•å·¥ç¨‹æ’¸åˆ°åº•çš„å¼€å‘äººå‘˜ï¼Œæƒ³è¯•ç€å°†é¡¹ç›®è¿›è¡Œç»„ä»¶åŒ–æ”¹é€ ï¼Œè¯´åŠ¨å°±åŠ¨ã€‚æ¯•ç«ŸæŠ€æœ¯éƒ½æ˜¯å†™å‡ºæ¥çš„ï¼Œçœ‹çœ‹æ„Ÿè§‰æ‡‚äº†ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­è¿˜æ˜¯èƒ½é‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œå¼€å§‹æèµ·æ¥ã€‚

## ğŸ’¥ 1.1 ä¸ºä»€ä¹ˆä½¿ç”¨ç»„ä»¶åŒ–

ä¸€ç›´ä½¿ç”¨å•å·¥ç¨‹æ“ä½œï¼Œé¡¹ç›®è¶Šæ¥è¶Šå¤§å¯¼è‡´å‡ºç°äº†ä¸å°‘çš„é—®é¢˜ï¼š

- **æŸ¥æ‰¾é—®é¢˜æ…¢**ï¼šå®šä½é—®é¢˜ï¼Œéœ€è¦åœ¨å¤šä¸ªä»£ç æ··åˆçš„æ¨¡å—ä¸­å¯»æ‰¾å’Œè·³è½¬ã€‚

- **å¼€å‘ç»´æŠ¤æˆæœ¬å¢åŠ **ï¼šé¿å…ä»£ç çš„æ”¹åŠ¨å½±å“å…¶å®ƒä¸šåŠ¡çš„åŠŸèƒ½ï¼Œå¯¼è‡´å¼€å‘å’Œç»´æŠ¤æˆæœ¬ä¸æ–­å¢åŠ ã€‚
- **ç¼–è¯‘æ—¶é—´é•¿**ï¼šé¡¹ç›®å·¥ç¨‹è¶Šå¤§ï¼Œç¼–è¯‘å®Œæ•´ä»£ç æ‰€èŠ±è´¹çš„æ—¶é—´è¶Šé•¿ã€‚
- **å¼€å‘æ•ˆç‡ä½**ï¼šå¤šäººåä½œå¼€å‘æ—¶ï¼Œå¼€å‘é£æ ¼ä¸ä¸€ï¼Œåˆå¾ˆéš¾å°†ä¸šåŠ¡å®Œå…¨åˆ†å‰²ï¼Œå¤§å®¶äº’ç›¸å½±å“ï¼Œå¯¼è‡´å¼€å‘æ•ˆç‡ä½ä¸‹ã€‚
- **ä»£ç å¤ç”¨æ€§å·®**ï¼šå†™è¿‡çš„ä»£ç å¾ˆéš¾æŠ½ç¦»å‡ºæ¥å†æ¬¡åˆ©ç”¨ã€‚

## ğŸ’¥ 1.2 æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–

### ğŸŒ€ 1.2.1 æ¨¡å—

å°†**ä¸€ä¸ªç¨‹åºæŒ‰ç…§å…¶åŠŸèƒ½åšæ‹†åˆ†ï¼Œåˆ†æˆç›¸äº’ç‹¬ç«‹çš„æ¨¡å—**ï¼Œä»¥ä¾¿äºæ¯ä¸ªæ¨¡å—åªåŒ…å«ä¸å…¶åŠŸèƒ½ç›¸å…³çš„å†…å®¹ï¼Œæ¯”å¦‚**ç™»å½•æ¨¡å—**ã€**é¦–é¡µæ¨¡å—**ç­‰ç­‰ã€‚

### ğŸŒ€ 1.2.2 ç»„ä»¶

ç»„ä»¶æŒ‡çš„æ˜¯å•ä¸€çš„åŠŸèƒ½ç»„ä»¶ï¼Œå¦‚**ç™»å½•ç»„ä»¶**ã€**è§†é¢‘ç»„ä»¶**ã€**æ”¯ä»˜ç»„ä»¶** ç­‰ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ä»¥ä¸€ä¸ªå•ç‹¬çš„ module å¼€å‘ï¼Œå¹¶ä¸”å¯ä»¥å•ç‹¬æŠ½å‡ºæ¥ä½œä¸º SDK å¯¹å¤–å‘å¸ƒä½¿ç”¨ã€‚å¯ä»¥è¯´å¾€å¾€ä¸€ä¸ªæ¨¡å—åŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ã€‚

## ğŸ’¥ 1.3 ç»„ä»¶åŒ–çš„ä¼˜åŠ¿

ç»„ä»¶åŒ–åŸºäºå¯é‡ç”¨çš„ç›®çš„ï¼Œå°†åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹ç»„ä»¶ï¼Œä»¥**å‡å°‘è€¦åˆ**:
- **åŠ å¿«ç¼–è¯‘é€Ÿåº¦**ï¼šæ¯ä¸ªä¸šåŠ¡åŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„å·¥ç¨‹ï¼Œå¯ç‹¬ç«‹ç¼–è¯‘è¿è¡Œï¼Œæ‹†åˆ†åä»£ç é‡è¾ƒå°‘ï¼Œç¼–è¯‘è‡ªç„¶å˜å¿«ã€‚

- **è§£è€¦**ï¼šé€šè¿‡å…³æ³¨ç‚¹åˆ†ç¦»çš„å½¢å¼ï¼Œå°†Appåˆ†ç¦»æˆå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚
- **æé«˜å¼€å‘æ•ˆç‡**ï¼šå¤šäººå¼€å‘ä¸­ï¼Œæ¯ä¸ªç»„ä»¶æ¨¡å—ç”±å•äººè´Ÿè´£ï¼Œé™ä½äº†å¼€å‘ä¹‹é—´æ²Ÿé€šçš„æˆæœ¬ï¼Œå‡å°‘å› ä»£ç é£æ ¼ä¸ä¸€è€Œäº§ç”Ÿçš„ç›¸äº’å½±å“ã€‚
- **ä»£ç å¤ç”¨**ï¼šç±»ä¼¼æˆ‘ä»¬å¼•ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥å°†åŸºç¡€ç»„ä»¶æˆ–åŠŸèƒ½ç»„ä»¶å‰¥ç¦»ã€‚åœ¨æ–°é¡¹ç›®å¾®è°ƒæˆ–ç›´æ¥ä½¿ç”¨ã€‚

## ğŸ’¥ 1.4 ç»„ä»¶åŒ–éœ€è¦è§£å†³çš„é—®é¢˜

- ç»„ä»¶åˆ†å±‚ï¼šæ€ä¹ˆå°†ä¸€ä¸ªé¡¹ç›®åˆ†æˆå¤šä¸ªç»„ä»¶ã€ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»æ˜¯æ€ä¹ˆæ ·çš„?

- ç»„ä»¶å•ç‹¬è¿è¡Œå’Œé›†æˆè°ƒè¯•ï¼šç»„ä»¶æ˜¯å¦‚ä½•ç‹¬ç«‹è¿è¡Œå’Œé›†æˆè°ƒè¯•çš„ï¼Ÿ
- ç»„ä»¶é—´é€šä¿¡:ä¸»é¡¹ç›®ä¸ç»„ä»¶ã€ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´å¦‚ä½•é€šä¿¡å°±å˜æˆå…³é”®?

# ğŸ”¥ äºŒã€ç»„ä»¶åˆ†å±‚

ç»„ä»¶ä¾èµ–å…³ç³»æ˜¯ä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼Œä¿®æ”¹é¢‘ç‡æ˜¯ä¸Šå±‚é«˜äºä¸‹å±‚ã€‚å…ˆä¸Šä¸€å¼ å›¾ï¼š

![](https://files.mdnice.com/user/16804/cedf8ea5-7f77-4509-8034-2ea0254c1907.png)

## ğŸ’¥ 2.1 åŸºç¡€ç»„ä»¶

åŸºç¡€å…¬å…±æ¨¡å—ï¼Œæœ€åº•å±‚çš„åº“ï¼š

- å°è£…å…¬ç”¨çš„åŸºç¡€ç»„ä»¶;
- ç½‘ç»œè®¿é—®æ¡†æ¶ã€å›¾ç‰‡åŠ è½½æ¡†æ¶ç­‰ä¸»æµçš„ç¬¬ä¸‰æ–¹åº“;
- å„ç§ç¬¬ä¸‰æ–¹SDKã€‚

## ğŸ’¥ 2.2 commonç»„ä»¶(lib_common)

- æ”¯æ’‘ä¸šåŠ¡ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶çš„åŸºç¡€ï¼ˆBaseActivity/BaseFragmentç­‰åŸºç¡€èƒ½åŠ›;
- ä¾èµ–åŸºç¡€ç»„ä»¶å±‚;
- ä¸šåŠ¡ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶æ‰€éœ€çš„åŸºç¡€èƒ½åŠ›åªéœ€è¦ä¾èµ–commonç»„ä»¶å³å¯è·å¾—ã€‚

## ğŸ’¥ 2.3 åŠŸèƒ½ç»„ä»¶

- ä¾èµ–åŸºç¡€ç»„ä»¶å±‚;
- å¯¹ä¸€äº›å…¬ç”¨çš„åŠŸèƒ½ä¸šåŠ¡è¿›è¡Œå°è£…ä¸å®ç°;
- ä¸šåŠ¡ç»„ä»¶å¯ä»¥åœ¨libraryå’Œapplicationä¹‹é—´åˆ‡æ¢ï¼Œä½†æ˜¯æœ€åæ‰“åŒ…æ—¶å¿…é¡»æ˜¯library ;

## ğŸ’¥ 2.4 ä¸šåŠ¡ç»„ä»¶

- å¯ç›´æ¥ä¾èµ–åŸºç¡€ç»„ä»¶å±‚;åŒæ—¶ä¹Ÿèƒ½ä¾èµ–å…¬ç”¨çš„ä¸€äº›åŠŸèƒ½ç»„ä»¶;
- å„ç»„ä»¶ä¹‹é—´ä¸å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œé€šè¿‡è·¯ç”±è¿›è¡Œé€šä¿¡;
- ä¸šåŠ¡ç»„ä»¶å¯ä»¥åœ¨libraryå’Œapplicationä¹‹é—´åˆ‡æ¢ï¼Œä½†æ˜¯æœ€åæ‰“åŒ…æ—¶å¿…é¡»æ˜¯library ;

## ğŸ’¥ 2.5 ä¸»å·¥ç¨‹(app)

- åªä¾èµ–å„ä¸šåŠ¡ç»„ä»¶;

- é™¤äº†ä¸€äº›å…¨å±€çš„é…ç½®å’Œä¸»Activityä¹‹å¤–ï¼Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡ä»£ç ï¼Œæ˜¯åº”ç”¨çš„å…¥å£;

## ğŸ’¥ å®Œæˆåé¡¹ç›®

![](https://files.mdnice.com/user/16804/1ca04dcb-1b97-4e50-916c-30d5687dd0a9.png)

è¿™åªæ˜¯ä¸ªå¤§æ¦‚ï¼Œå¹¶ä¸æ˜¯è¯´å¿…é¡»è¿™æ ·ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼æ¥ã€‚æ¯”å¦‚ï¼šä½ è§‰å¾—åŸºç¡€ç»„ä»¶æ¯”è¾ƒå¤šå¯¼è‡´projecté‡Œé¢çš„é¡¹ç›®å¤ªå¤šï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªlib_baseï¼Œç„¶åœ¨lib_baseé‡Œé¢å†åˆ›å»ºå…¶ä»–åŸºç¡€ç»„ä»¶å³å¯ã€‚

# ğŸ”¥ ä¸‰ã€ç»„ä»¶å•ç‹¬è°ƒè¯•

## ğŸ’¥ 3.1 åˆ›å»ºç»„ä»¶(æ”¶è—)

![](https://files.mdnice.com/user/16804/f000d1a7-e4ca-4d22-83bd-ab511ef1c12e.png)

- libraryå’Œapplicationä¹‹é—´åˆ‡æ¢ï¼šé€‰æ‹©ç¬¬ä¸€é¡¹ã€‚

- å§‹ç»ˆæ˜¯libraryï¼šé€‰æ‹©ç¬¬äºŒé¡¹

è¿™æ ·å°½å¯èƒ½çš„å‡å°‘å˜åŠ¨é¡¹ï¼Œå½“ç„¶è¿™ä»…ä»…æ˜¯ä¸ªå»ºè®®ï¼Œçœ‹ä¸ªäººä¹ æƒ¯å§ã€‚

å› ä¸ºå’±ä»¬åˆ›å»ºçš„æ˜¯ä¸€ä¸ªmoduleï¼Œæ‰€ä»¥åœ¨AndridManifestä¸­æ·»åŠ android:exported="true"å±æ€§å¯ç›´æ¥æ„å»ºä¸€ä¸ªAPKã€‚ä¸‹é¢å’±ä»¬çœ‹çœ‹å¦‚ä½•ç”Ÿæˆä¸åŒçš„å·¥ç¨‹ç±»å‹ã€‚

## ğŸ’¥ 3.2 åŠ¨æ€é…ç½®ç»„ä»¶çš„å·¥ç¨‹ç±»å‹

åœ¨ AndroidStudio å¼€å‘ Android é¡¹ç›®æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ Gradle æ¥æ„å»ºï¼Œå…·ä½“æ¥è¯´ä½¿ç”¨çš„æ˜¯ Android Gradle æ’ä»¶æ¥æ„å»ºï¼ŒAndroid Gradle ä¸­æä¾›äº†ä¸‰ç§æ’ä»¶ï¼Œåœ¨å¼€å‘ä¸­å¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„æ’ä»¶æ¥æ„å»ºä¸åŒçš„å·¥ç¨‹ã€‚

### ğŸŒ€ 3.2.1 build.gradle(module)
```java
//æ„å»ºåè¾“å‡ºä¸€ä¸ª APK å®‰è£…åŒ…
apply plugin: 'com.android.application'
//æ„å»ºåè¾“å‡º ARR åŒ…
apply plugin: 'com.android.library'
//é…ç½®ä¸€ä¸ª Android Test å·¥ç¨‹
apply plugin: 'com.android.test'
```

**ç‹¬ç«‹è°ƒè¯•**ï¼šè®¾ç½®ä¸º Application æ’ä»¶ã€‚

**é›†æˆè°ƒè¯•**ï¼šè®¾ç½®ä¸º Library æ’ä»¶ã€‚

### ğŸŒ€ 3.2.2 è®¾ç½®gradle.properties

![](https://files.mdnice.com/user/16804/7f7f5575-2413-4b41-a7f0-0f060c2bb204.png)

isDebug = true ç‹¬ç«‹è°ƒè¯•

### ğŸŒ€ 3.2.3 åŠ¨æ€é…åˆ¶æ’ä»¶(build.gradle)

```java
//æ³¨æ„gradle.propertiesä¸­çš„æ•°æ®ç±»å‹éƒ½æ˜¯Stringç±»å‹ï¼Œä½¿ç”¨å…¶ä»–æ•°æ®ç±»å‹éœ€è¦è‡ªè¡Œè½¬æ¢
if(isDebug.toBoolean()){
    //æ„å»ºåè¾“å‡ºä¸€ä¸ª APK å®‰è£…åŒ…
    apply plugin: 'com.android.application'
}else{
    //æ„å»ºåè¾“å‡º ARR åŒ…
    apply plugin: 'com.android.library'
}
```
## ğŸ’¥ 3.3 åŠ¨æ€é…ç½®ç»„ä»¶çš„ ApplicationId å’Œ AndroidManifest æ–‡ä»¶

- ä¸€ä¸ª APP æ˜¯åªæœ‰ä¸€ä¸ª **ApplicationId** ï¼Œæ‰€ä»¥åœ¨**å•ç‹¬è°ƒè¯•**å’Œ**é›†æˆè°ƒè¯•**ç»„ä»¶çš„ ApplicationId åº”è¯¥æ˜¯ä¸åŒçš„ã€‚

- **å•ç‹¬è°ƒè¯•**æ—¶ä¹Ÿæ˜¯éœ€è¦æœ‰ä¸€ä¸ªå¯åŠ¨é¡µï¼Œå½“é›†æˆè°ƒè¯•æ—¶ä¸»å·¥ç¨‹å’Œç»„ä»¶çš„AndroidManifestæ–‡ä»¶åˆå¹¶ä¼šäº§ç”Ÿå¤šä¸ªå¯åŠ¨é¡µã€‚

æ ¹æ®ä¸Šé¢åŠ¨æ€é…åˆ¶æ’ä»¶çš„ç»éªŒï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨build.gradleä¸­åŠ¨æ€é…åˆ¶ApplicationId å’Œ AndroidManifest æ–‡ä»¶ã€‚

### ğŸŒ€ 3.3.1 å‡†å¤‡ä¸¤ä¸ªä¸åŒè·¯å¾„çš„ AndroidManifest æ–‡ä»¶

![](https://files.mdnice.com/user/16804/d3349f72-93c8-4ad3-9405-7d8d59a3ee97.png)

æœ‰ä»€ä¹ˆä¸åŒï¼Ÿå’±ä»¬ä¸€èµ·çœ‹çœ‹å…·ä½“å†…å®¹ã€‚

### ğŸŒ€ 3.3.2 src/main/debug/AndroidManifest
```html
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.scc.module.collect">

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.SccMall">
        <activity android:name=".CollectActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
```
### ğŸŒ€ 3.3.3 src/main/debug/AndroidManifest
```html
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.scc.module.collect">
    <application
        android:allowBackup="true"
        android:supportsRtl="true"
        >
        <activity android:name=".CollectActivity"/>
    </application>

</manifest>
```
### ğŸŒ€ 3.3.4 åŠ¨æ€é…åˆ¶(build.gradle)

```java
    defaultConfig {
        if(isDebug.toBoolean()){
            //ç‹¬ç«‹è°ƒè¯•çš„æ—¶å€™æ‰èƒ½è®¾ç½®applicationId
            applicationId "com.scc.module.collect"
        }
    }
    sourceSets {
        main {
            if (isDebug.toBoolean()) {
                //ç‹¬ç«‹è°ƒè¯•
                manifest.srcFile 'src/main/debug/AndroidManifest.xml'
            } else {
                //é›†æˆè°ƒè¯•
                manifest.srcFile 'src/main/AndroidManifest.xml'
            }
        }
    }
```

## ğŸ’¥ 3.4 å®ç°æ•ˆæœ

### ğŸŒ€ 3.4.1 ç‹¬ç«‹è°ƒè¯•

isDebug = true

![](https://files.mdnice.com/user/16804/6d6b4c7a-a2d3-4022-b4ed-847c9436cb28.png)

### ğŸŒ€ 3.4.2 é›†æˆè°ƒè¯•

isDebug = false

![](https://files.mdnice.com/user/16804/21c5e08b-72d7-4c79-b01e-3da1034a5c72.png)

# ğŸ”¥ å››ã€Gradleé…ç½®ç»Ÿä¸€ç®¡ç†

## ğŸ’¥ 4.1 config.gradle
å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ’ä»¶ç‰ˆæœ¬ã€ä¾èµ–åº“ç‰ˆæœ¬å‡çº§æ—¶ï¼Œé¡¹ç›®å¤šçš„è¯æ”¹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬å¯¹Gradleé…ç½®ç»Ÿä¸€ç®¡ç†ã€‚å¦‚ä¸‹ï¼š

![](https://files.mdnice.com/user/16804/77598325-1567-41d7-931e-51d465fb486c.png)

å…·ä½“å†…å®¹

```java
ext{
    //ç»„ä»¶ç‹¬ç«‹è°ƒè¯•å¼€å…³, æ¯æ¬¡æ›´æ”¹å€¼åè¦åŒæ­¥å·¥ç¨‹
    isDebug = true
    android = [
            // ç¼–è¯‘ SDK ç‰ˆæœ¬
            compileSdkVersion: 31,
            // æœ€ä½å…¼å®¹ Android ç‰ˆæœ¬
            minSdkVersion    : 21,
            // æœ€é«˜å…¼å®¹ Android ç‰ˆæœ¬
            targetSdkVersion : 31,
            // å½“å‰ç‰ˆæœ¬ç¼–å·
            versionCode      : 1,
            // å½“å‰ç‰ˆæœ¬ä¿¡æ¯
            versionName      : "1.0.0"
    ]
    applicationid = [
            app:"com.scc.sccmall",
            main:"com.scc.module.main",
            webview:"com.scc.module.webview",
            login:"com.scc.module.login",
            collect:"com.scc.module.collect"
    ]
    dependencies = [
            "appcompat"         :'androidx.appcompat:appcompat:1.2.0',
            "material"          :'com.google.android.material:material:1.3.0',
            "constraintlayout"  :'androidx.constraintlayout:constraintlayout:2.0.1',
            "livedata"          :'androidx.lifecycle:lifecycle-livedata:2.4.0',
            "viewmodel"         :'androidx.lifecycle:lifecycle-viewmodel:2.4.0',
            "legacyv4"          :'androidx.legacy:legacy-support-v4:1.0.0',
            "splashscreen"      :'androidx.core:core-splashscreen:1.0.0-alpha01'
    ]
    libARouter= 'com.alibaba:arouter-api:1.5.2'
    libARouterCompiler = 'com.alibaba:arouter-compiler:1.5.2'
    libGson = 'com.google.code.gson:gson:2.8.9'
}

```

## ğŸ’¥ 4.2 æ·»åŠ é…åˆ¶æ–‡ä»¶build.gradle(project)
```java
apply from:"config.gradle"
```
## ğŸ’¥ 4.3 å…¶ä»–ç»„ä»¶ä½¿ç”¨
```java
//build.gradle
//æ³¨æ„gradle.propertiesä¸­çš„æ•°æ®ç±»å‹éƒ½æ˜¯Stringç±»å‹ï¼Œä½¿ç”¨å…¶ä»–æ•°æ®ç±»å‹éœ€è¦è‡ªè¡Œè½¬æ¢
if(isDebug.toBoolean()){
    //æ„å»ºåè¾“å‡ºä¸€ä¸ª APK å®‰è£…åŒ…
    apply plugin: 'com.android.application'
}else{
    //æ„å»ºåè¾“å‡º ARR åŒ…
    apply plugin: 'com.android.library'
}
android {
    compileSdkVersion 31

    defaultConfig {
        if(isDebug.toBoolean()){
            //ç‹¬ç«‹è°ƒè¯•çš„æ—¶å€™æ‰èƒ½è®¾ç½®applicationId
            applicationId "com.scc.module.collect"
        }
        minSdkVersion 21
        targetSdkVersion 31
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    sourceSets {
        main {
            if (isDebug.toBoolean()) {
                //ç‹¬ç«‹è°ƒè¯•
                manifest.srcFile 'src/main/debug/AndroidManifest.xml'
            } else {
                //é›†æˆè°ƒè¯•
                manifest.srcFile 'src/main/AndroidManifest.xml'
            }
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {
//    implementation root.dependencies.appcompat
//    implementation root.dependencies.material
//    implementation root.dependencies.constraintlayout
//    implementation root.dependencies.livedata
//    implementation root.dependencies.viewmodel
//    implementation root.dependencies.legacyv4
//    implementation root.dependencies.splashscreen
//    implementation root.libARouter
    //ä¸Šé¢å†…å®¹åœ¨lib_commonä¸­å·²ç»æ·»åŠ å’±ä»¬ç›´æ¥ä¾èµ–lib_common
    implementation project(':lib_common')

    testImplementation 'junit:junit:4.+'
    androidTestImplementation 'androidx.test.ext:junit:1.1.2'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
}
```

# ğŸ”¥ äº”ã€ç»„ä»¶é—´ç•Œé¢è·³è½¬(ARouter)

## ğŸ’¥ 5.1 ä»‹ç»
Android ä¸­çš„ç•Œé¢è·³è½¬é‚£æ˜¯ç›¸å½“ç®€å•ï¼Œä½†æ˜¯åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œç”±äºä¸åŒç»„ä»¶å¼æ²¡æœ‰ç›¸äº’ä¾èµ–çš„ï¼Œæ‰€ä»¥ä¸å¯ä»¥ç›´æ¥è®¿é—®å½¼æ­¤çš„ç±»ï¼Œè¿™æ—¶å€™å°±æ²¡åŠæ³•é€šè¿‡æ˜¾å¼çš„æ–¹å¼å®ç°äº†ã€‚

æ‰€ä»¥åœ¨è¿™é‡Œå’±ä»¬é‡‡å–æ›´åŠ çµæ´»çš„ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨ Alibaba å¼€æºçš„ [ARouter](https://github.com/alibaba/ARouter) æ¥å®ç°ã€‚

>ä¸€ä¸ªç”¨äºå¸®åŠ© Android App è¿›è¡Œç»„ä»¶åŒ–æ”¹é€ çš„æ¡†æ¶ â€”â€” æ”¯æŒæ¨¡å—é—´çš„è·¯ç”±ã€é€šä¿¡ã€è§£è€¦

æ–‡æ¡£ä»‹ç»çš„è›®è¯¦ç»†çš„ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å®è·µä¸€ä¸‹ã€‚è¿™é‡Œåšä¸ªç®€å•çš„ä½¿ç”¨ã€‚

## ğŸ’¥ 5.2 ä½¿ç”¨

### ğŸŒ€ 5.2.1 æ·»åŠ ä¾èµ–

å…ˆåœ¨ç»Ÿä¸€çš„**config.gradl**eæ·»åŠ ç‰ˆæœ¬ç­‰ä¿¡æ¯
```java
ext{
    ...
    libARouter= 'com.alibaba:arouter-api:1.5.2'
    libARouterCompiler = 'com.alibaba:arouter-compiler:1.5.2'
}
```

å› ä¸ºæ‰€æœ‰çš„åŠŸèƒ½ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶éƒ½ä¾èµ–lib_commonï¼Œé‚£ä¹ˆå’±ä»¬å…ˆä»lib_commonå¼€å§‹é…åˆ¶

**lib_common**
```java
dependencies {
    api root.libARouter
    ...
}
```

**å…¶ä»–ç»„ä»¶(å¦‚collect)**

```java
android {
    defaultConfig {
        ...
        javaCompileOptions {
            annotationProcessorOptions {
                arguments = [AROUTER_MODULE_NAME: project.getName()]
                //å¦‚æœé¡¹ç›®å†…æœ‰å¤šä¸ªannotationProcessorï¼Œåˆ™ä¿®æ”¹ä¸ºä»¥ä¸‹è®¾ç½®
                //arguments += [AROUTER_MODULE_NAME: project.getName()]
            }
        }
    }
}

dependencies {
    //arouter-compilerçš„æ³¨è§£ä¾èµ–éœ€è¦æ‰€æœ‰ä½¿ç”¨ ARouter çš„ module éƒ½æ·»åŠ ä¾èµ–
    annotationProcessor root.libARouterCompiler
    ...
}
```

### ğŸŒ€ 5.2.2 æ·»åŠ æ³¨è§£

ä½ è¦è·³è½¬çš„**Activity**

```java
// åœ¨æ”¯æŒè·¯ç”±çš„é¡µé¢ä¸Šæ·»åŠ æ³¨è§£(å¿…é€‰)
// è¿™é‡Œçš„è·¯å¾„éœ€è¦æ³¨æ„çš„æ˜¯è‡³å°‘éœ€è¦æœ‰ä¸¤çº§ï¼Œ/xx/xx
@Route(path = "/collect/CollectActivity")
public class CollectActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_collect);
    }
}
```

### ğŸŒ€ 5.2.3 åˆå§‹åŒ–SDKï¼ˆä¸»é¡¹ç›®Applicationï¼‰

```java
public class App extends BaseApplication {
    @Override
    public void onCreate() {
        super.onCreate();
        if (isDebug()) {           // è¿™ä¸¤è¡Œå¿…é¡»å†™åœ¨initä¹‹å‰ï¼Œå¦åˆ™è¿™äº›é…ç½®åœ¨initè¿‡ç¨‹ä¸­å°†æ— æ•ˆ
            ARouter.openLog();     // æ‰“å°æ—¥å¿—
            ARouter.openDebug();   // å¼€å¯è°ƒè¯•æ¨¡å¼(å¦‚æœåœ¨InstantRunæ¨¡å¼ä¸‹è¿è¡Œï¼Œå¿…é¡»å¼€å¯è°ƒè¯•æ¨¡å¼ï¼çº¿ä¸Šç‰ˆæœ¬éœ€è¦å…³é—­,å¦åˆ™æœ‰å®‰å…¨é£é™©)
        }
        ARouter.init(this); // å°½å¯èƒ½æ—©ï¼Œæ¨èåœ¨Applicationä¸­åˆå§‹åŒ–
    }
    private boolean isDebug() {
        return BuildConfig.DEBUG;
    }
}
```
## ğŸ’¥ 5.3 å‘èµ·è·¯ç”±æ“ä½œ

### ğŸŒ€ 5.3.1 åº”ç”¨å†…ç®€å•çš„è·³è½¬

```java
ARouter.getInstance().build("/collect/CollectActivity").navigation();
```

è¿™é‡Œæ˜¯ç”¨**module_main**çš„HomeFragmentè·³è½¬è‡³**module_collect**çš„CollectActivityç•Œé¢ï¼Œä¸¤ä¸ªmoduleä¸­ä¸å­˜åœ¨ä¾èµ–å…³ç³»ã€‚`"/collect/CollectActivity"`åœ¨ä¸Šé¢å·²æ³¨å†Œå°±ä¸å¤šæè¿°äº†ã€‚

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://files.mdnice.com/user/16804/7264f49e-b1c7-4311-991b-b194106204db.gif)

### ğŸŒ€ 5.3.2 è·³è½¬å¹¶æºå¸¦å‚æ•°

è¿™é‡Œæ˜¯ç”¨**module_main**çš„MineFragmentçš„Adapterè·³è½¬è‡³**module_webview**çš„WebViewActivityç•Œé¢ï¼Œä¸¤ä¸ªmoduleä¸­åŒæ ·ä¸å­˜åœ¨ä¾èµ–å…³ç³»ã€‚

**å¯åŠ¨æ–¹**

```java
        ARouter.getInstance().build("/webview/WebViewActivity")
                .withString("url", bean.getUrl())
                .withString("content",bean.getName())
                .navigation();
```
è¿™é‡Œä¼ äº†ä¸¤ä¸ªå‚æ•°**url**å’Œ**name**åˆ°WebViewActivityï¼Œä¸‹é¢å’±ä»¬çœ‹çœ‹WebViewActivityæ€ä¹ˆæ¥æ”¶ã€‚

**æ¥æ”¶æ–¹**

```java
//ä¸ºæ¯ä¸€ä¸ªå‚æ•°å£°æ˜ä¸€ä¸ªå­—æ®µï¼Œå¹¶ä½¿ç”¨ @Autowired æ ‡æ³¨
//URLä¸­ä¸èƒ½ä¼ é€’Parcelableç±»å‹æ•°æ®ï¼Œé€šè¿‡ARouter apiå¯ä»¥ä¼ é€’Parcelableå¯¹è±¡
//æ·»åŠ æ³¨è§£(å¿…é€‰)
@Route(path = "/webview/WebViewActivity")
public class WebViewActivity extends BaseActivity<ActivityWebviewBinding, WebViewViewModel> {
    //å‘é€æ–¹å’Œæ¥æ”¶æ–¹å®šä¹‰çš„keyåç§°ç›¸åŒåˆ™æ— éœ€å¤„ç†
    @Autowired
    public String url;
    //é€šè¿‡nameæ¥æ˜ å°„URLä¸­çš„ä¸åŒå‚æ•°
    //å‘é€æ–¹å®šä¹‰keyä¸ºcontentï¼Œæˆ‘ä»¬ç”¨titleæ¥æ¥æ”¶
    @Autowired(name = "content")
    public String title;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //æ³¨å…¥å‚æ•°å’ŒæœåŠ¡(è¿™é‡Œç”¨åˆ°@Autowiredæ‰€ä»¥è¦è®¾ç½®)
        //ä¸ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥,å¯ä¸å†™ï¼Œå¦‚CollectActivityæ²¡æ¥æ”¶å‚æ•°å°±æ²¡æœ‰è®¾ç½®
        ARouter.getInstance().inject(this);
        binding.btnBoom.setText(String.format("%s,ä½ æ¥å•¦", title));
        //åŠ è½½é“¾æ¥
        initWebView(binding.wbAbout, url);
    }
}
```
ä¸Šæ•ˆæœå›¾ï¼š

![](https://files.mdnice.com/user/16804/8bd28101-7c93-49ba-9930-856e238ad674.gif)

æå®šï¼Œæ›´å¤šé«˜çº§ç©æ³•å¯è‡ªè¡Œæ¢ç´¢ã€‚

### ğŸŒ€ 5.3.3 å°è®°(ARouterç›®æ ‡ä¸å­˜åœ¨)

**W/ARouter::: ARouter::There is no route match the path**

è¿™é‡Œå‡ºç°ä¸ªå°é—®é¢˜ï¼Œé…ç½®æ³¨é‡Šéƒ½å¥½å¥½çš„ï¼Œä½†æ˜¯å‘é€å‘æ— è®ºå¦‚ä½•éƒ½æ‰¾ä¸åˆ°è®¾ç½®å¥½çš„Activityã€‚å°è¯•æ–¹æ¡ˆï¼š
- Clean Project
- Rebuild Project
- åœ¨ä¸‹å›¾ä¹Ÿèƒ½æ‰¾åˆ°ARouterå†…å®¹ã€‚

åæ¥ä¿®æ”¹Activityåç§°å¥½äº†ã€‚

![](https://files.mdnice.com/user/16804/2b8340a2-2bd0-4ca3-bfd5-285619635eda.png)

# ğŸ”¥ å…­ã€ç»„ä»¶é—´é€šä¿¡(æ•°æ®ä¼ é€’)

ç•Œé¢è·³è½¬æå®šäº†ï¼Œé‚£ä¹ˆæ•°æ®ä¼ é€’æ€ä¹ˆåŠï¼Œæˆ‘åœ¨module_mainä¸­ä½¿ç”¨æ‚¬æµ®çª—ï¼Œä½†æ˜¯éœ€è¦åˆ¤æ–­è¿™ä¸ªç”¨æˆ·æ˜¯å¦å·²ç™»å½•ï¼Œå†æ‰§è¡Œåç»­é€»è¾‘ï¼Œè¿™ä¸ªè¦æ€ä¹ˆåŠï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ **æ¥å£ + ARouter** çš„æ–¹å¼æ¥è§£å†³ã€‚

åœ¨è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€ä¸ª componentbase æ¨¡å—ï¼Œ**è¿™ä¸ªæ¨¡å—è¢«æ‰€æœ‰çš„ç»„ä»¶ä¾èµ–**ã€‚

è¿™é‡Œæˆ‘ä»¬é€šè¿‡ **module_mainç»„ä»¶** ä¸­è°ƒç”¨ **module_loginç»„ä»¶** ä¸­çš„æ–¹æ³•æ¥è·å–ç™»å½•çŠ¶æ€è¿™ä¸ªåœºæ™¯æ¥æ¼”ç¤ºã€‚

## ğŸ’¥ 6.1 é€šè¿‡ä¾èµ–æ³¨å…¥è§£è€¦:æœåŠ¡ç®¡ç†(ä¸€) æš´éœ²æœåŠ¡

### ğŸŒ€ 6.1.1 åˆ›å»º componentbase æ¨¡å—(lib)

![](https://files.mdnice.com/user/16804/9683da26-7bca-494e-812d-9b34996992e9.png)

### ğŸŒ€ 6.1.2 åˆ›å»ºæ¥å£å¹¶ç»§æ‰¿IProvider

>æ³¨æ„:æ¥å£å¿…é¡»ç»§æ‰¿IProviderï¼Œæ˜¯ä¸ºäº†ä½¿ç”¨ARouterçš„å®ç°æ³¨å…¥ã€‚

![](https://files.mdnice.com/user/16804/7ed57485-102e-4abe-ad82-ac65b9449ddb.png)

### ğŸŒ€ 6.1.3 åœ¨module_loginç»„ä»¶ä¸­å®ç°æ¥å£

**lib_common**

æ‰€æœ‰ä¸šåŠ¡ç»„ä»¶å’ŒåŠŸèƒ½ç»„ä»¶éƒ½ä¾èµ–lib_commonï¼Œæ‰€ä»¥å’±ä»¬ç›´æ¥åœ¨lib_commonæ·»åŠ ä¾èµ–å³å¯
```java
dependencies {
    ...
    api project(":lib_componentbase")
}
```

**module_login**

```java
dependencies {
    ...
    implementation project(':lib_common')
}
```
**å®ç°æ¥å£**
```java
//å®ç°æ¥å£
@Route(path = "/login/AccountServiceImpl")
public class AccountServiceImpl implements IAccountService {
    @Override
    public boolean isLogin() {
        MLog.e("AccountServiceImpl.isLogin");
        return true;
    }

    @Override
    public String getAccountId() {
        MLog.e("AccountServiceImpl.getAccountId");
        return "1000";
    }

    @Override
    public void init(Context context) {

    }
}
```

![](https://files.mdnice.com/user/16804/97f5a2a6-0617-42cd-8087-cc9baf5ba684.png)

## ğŸ’¥ 6.2 é€šè¿‡ä¾èµ–æ³¨å…¥è§£è€¦:æœåŠ¡ç®¡ç†(äºŒ) å‘ç°æœåŠ¡

### ğŸŒ€ 6.2.1 åœ¨module_mainä¸­è°ƒç”¨è°ƒç”¨æ˜¯å¦å·²ç™»å…¥
```java
public class HomeFragment extends BaseFragment<FragmentHomeBinding> {
    @Autowired
    IAccountService accountService;
    @Override
    public void onViewCreated(@NonNull @NotNull View view, @Nullable @org.jetbrains.annotations.Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        ARouter.getInstance().inject(this);
        binding.frgmentHomeFab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                MLog.e("Login:"+accountService.isLogin());
                MLog.e("AccountId:"+accountService.getAccountId());

            }
        });
    }
}
```

![](https://files.mdnice.com/user/16804/0be2d490-de0e-4046-9db5-7a5e64c300b7.png)
è¿è¡Œç»“æœï¼š
```java
E/-SCC-: AccountServiceImpl.isLogin
E/-SCC-: Login:true
E/-SCC-: AccountServiceImpl.getAccountId
E/-SCC-: AccountId:1000
```

# ğŸ”¥ ä¸ƒã€æ€»ç»“

æœ¬æ–‡ä»‹ç»äº†ç»„ä»¶åŒ–ã€ç»„ä»¶åˆ†å±‚ã€è§£å†³äº†ç»„ä»¶çš„ç‹¬ç«‹è°ƒè¯•ã€é›†æˆè°ƒè¯•ã€é¡µé¢è·³è½¬ã€ç»„ä»¶é€šä¿¡ç­‰ã€‚

å…¶å®ä¼šäº†è¿™äº›åä½ åŸºæœ¬å¯ä»¥æ­å»ºè‡ªå·±çš„ç»„ä»¶åŒ–é¡¹ç›®äº†ã€‚å…¶å®æœ€å¤§çš„é—®é¢˜è¿˜æ˜¯åˆ†ç»„åˆ†å±‚ã€ç»„ä»¶åˆ’åˆ†ã€‚è¿™ä¸ªå°±éœ€è¦æ ¹æ®ä½ çš„å®é™…æƒ…å†µæ¥è®¾ç½®ã€‚

æœ¬é¡¹ç›®æ¯”è¾ƒç³™ï¼Œåé¢ä¼šæ…¢æ…¢å®Œå–„ã€‚æ¯”å¦‚æ·»åŠ Gildeã€æ·»åŠ MMVKã€æ·»åŠ Roomç­‰ã€‚

[é¡¹ç›®ä¼ é€é—¨](https://github.com/shuaici/SccMall)

## ğŸ’¥ ç›¸å…³æ¨è

[Android OkHttp+Retrofit+Rxjava+Hiltå®ç°ç½‘ç»œè¯·æ±‚æ¡†æ¶](https://juejin.cn/post/7031479214683455502)

## ğŸ’¥ å‚è€ƒä¸æ„Ÿè°¢

[â€œç»ˆäºæ‡‚äº†â€ ç³»åˆ—ï¼šAndroidç»„ä»¶åŒ–ï¼Œå…¨é¢æŒæ¡ï¼](https://juejin.cn/post/6881116198889586701#heading-26)

[Android ç»„ä»¶åŒ–æœ€ä½³å®è·µ](https://juejin.cn/post/6844903649102004231#heading-19)

[æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸€ä¸ªä¼˜ç§€çš„Androidé¡¹ç›®æ¶æ„](https://juejin.cn/post/7023377961503948808#heading-0)
